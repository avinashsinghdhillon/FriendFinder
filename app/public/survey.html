<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder Survey</title>
    <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
        crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" 
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" 
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body style="background-color:rgba(0,123,255,.25); font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif; font-weight:bolder">
    <div class="container">
        <div class="jumbotron">
            <h1 style="color: #007bff">
                <i class="material-icons" style="margin: -0.5rem; font-size: 36px; position: relative; top: 5px">
                    person
                </i>
                <i class="material-icons" style="margin: -0.5rem; font-size: 30px; position: relative; top: 5px">
                    whatshot
                </i>
                <i class="material-icons" style="margin: -0.5rem; font-size: 36px; position: relative; top: 5px">
                    person
                </i>
                Friend Finder - Survey
            </h1>
            <p class="lead">Answer a few questions to let us get your personality profile.... </p>
            <p class="lead">...and we will find the closest match to you using our friend finder system.</p>
            <hr class="my-4">
            <a class="btn btn-primary btn-lg" href="/" role="home page">
                <span>
                    <i class="material-icons" style = "position: relative; top: 5px">home</i>
                </span>
                Home Page
            </a>
        </div>
        <hr>
        <div>
            <h3 style="color: #007bff">Basic Info:</h3>
        </div>
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" class="form-control" id="name" placeholder="Name">
        </div>
        <div class="form-group">
            <label for="photoLink">Link to Photo:</label>
            <input type="text" class="form-control" id="photoLink" placeholder="Link to photo">
        </div>
        <hr>

        <div>
            <h3 style="color: #007bff">Survey Questions:</h3>
        </div>
        <div>
            <ol id="questionList">
                <li>Your mind is always buzzing with unexplored ideas and plans.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                        <input type="radio" name="q1" id="1-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                        <input type="radio" name="q1" id="1-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                        <input type="radio" name="q1" id="1-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q1" id="1-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q1" id="1-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                <hr>
                <li>Generally speaking, you rely more on your experience than your imagination.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q2" id="2-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q2" id="2-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q2" id="2-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q2" id="2-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q2" id="2-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>You find it easy to stay relaxed and focused even when there is some pressure.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q3" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q3" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q3" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q3" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q3" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>You rarely do something just out of sheer curiosity.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q4" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q4" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q4" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q4" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q4" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>People can rarely upset you.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q5" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q5" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q5" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q5" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q5" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>It is often difficult for you to relate to other people’s feelings.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q6" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q6" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q6" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q6" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q6" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>In a discussion, truth should be more important than people’s sensitivities.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q7" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q7" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q7" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q7" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q7" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>You rarely get carried away by fantasies and ideas.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q8" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q8" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q8" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q8" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q8" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q9" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q9" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q9" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q9" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q9" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
                <li>You feel more energetic after spending time with a group of people.</li>
                    <div class="btn-group btn-group-toggle" data-toggle="buttons">
                        <span style="font-weight:lighter; color: #007bff">Strongly Argee <-----</span>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q10" id="3-1" autocomplete="off"> 1
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q10" id="3-2" autocomplete="off"> 2
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                          <input type="radio" name="q10" id="3-3" autocomplete="off"> 3
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q10" id="3-4" autocomplete="off"> 4
                        </label>
                        <label class="btn btn-outline-success btn-sm">
                            <input type="radio" name="q10" id="3-5" autocomplete="off"> 5
                        </label>
                        <span style="font-weight:lighter; color: #007bff">----->Strongly Disagree</span>
                    </div>
                    <hr>
            </ol>
        </div>
        <div>
            <button id="submitSurvey" type="button" class="btn btn-primary btn-lg btn-block">Submit</button>
        </div>
        <footer style="margin-top: 3rem; margin-bottom: 3rem">
            <a href="/api/individuals">FF-API</a> | Link to GitHub Repo
        </footer>
    </div>
    <!-- Modal goes here -->
    
    <script>
        //write the AJAX to 1.) POST new survey and then 2.) GET closest match from the server and then pop modal

        function checkSurvey(){
            //validate the survey
            var valid = true;
            if($("#name").length === 0 || $("#photoLink").length === 0){
                valid = false;
            }
            for (var i = 1; i <=10; i++){
                if ($('input[name=q'+ i +']:checked').length === 0) {
                    // no radio button was checked
                    valid = false;
                }
            }
            console.log("Valid: " + valid);
            if(!valid){
                //pop a modal to say all fields are required/////////////////////////////////////////////
            }
            return valid
        }


        $("#submitSurvey").on("click", function(){
            if(checkSurvey()){
                var  newSurvey = {
                    name: $("#name").val(),
                    photo: $("#photoLink").val(),
                    scores : [
                        //get the id of the radio button and spit it to get the response value
                        $('input[name=q1]:checked').attr("id").split("-")[1],
                        $('input[name=q2]:checked').attr("id").split("-")[1],
                        $('input[name=q3]:checked').attr("id").split("-")[1],
                        $('input[name=q4]:checked').attr("id").split("-")[1],
                        $('input[name=q5]:checked').attr("id").split("-")[1],
                        $('input[name=q6]:checked').attr("id").split("-")[1],
                        $('input[name=q7]:checked').attr("id").split("-")[1],
                        $('input[name=q8]:checked').attr("id").split("-")[1],
                        $('input[name=q9]:checked').attr("id").split("-")[1],
                        $('input[name=q10]:checked').attr("id").split("-")[1]
                    ]
                };
            }
            addSurveyToData(newSurvey);
        });
        
        function addSurveyToData(newIndividual){
            $.post("/api/individuals", newIndividual)
               .then(function (data) {
                   if (data.message === true) {
                       console.log("Survey Added ", data);
                   }
            });
            //add the get request here to get back the result of the survey(closest  match)///////////////////////////////
        }
    </script>
</body>
</html>